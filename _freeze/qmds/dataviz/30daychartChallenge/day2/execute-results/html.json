{
  "hash": "8bfb996bf92b658054ec6a1191bd2f46",
  "result": {
    "markdown": "---\ntitle: \"Day 01\" \ndate: '2022-04-02'\nimage: plot/day2_dcc_22.png\ncategories:\n  - R\n  - Data Viz \n  - ggplot2\ndescription: 'Day 2 form #30datChartChallenge'\n---\n\n::: {.cell}\n\n```{.r .cell-code}\n#load libraries\nlibrarian::shelf(\n  tidyverse\n  , showtext\n  , ggtext\n  , sysfonts\n  , emojifont\n  , cowplot\n)\n\ncaritas <- 18\nb <- \"grey60\"\np_d <- \"#df4576\"\ns_d <- \"#238ad3\"\nt_d <- \"#27eBa7\"\n\n\nvacc <-\n  PeruData::covid_estado_situacional(\"04/02/2022\") |> \n  mutate(\n    d11 = d1 / 32781250\n    , d21 = d2 / d1\n    , d31 = d3 / d2\n  ) |> \n  gather() |> \n  slice(4:6) |> \n  mutate(\n    count = as.integer(value * caritas)\n    , total = list(1:caritas)\n    )  |> \n  unnest(total) |> \n  rename(\n    dosis = 1\n    , percet = 2\n  ) |> \n  mutate(\n    dosis = as.numeric(str_sub(dosis, 2, 2))\n    , color = case_when(\n      dosis == 1 & total < count  ~ p_d\n      , dosis == 2 & total < count ~ s_d\n      , dosis ==3 & total< count ~ t_d\n      , T ~ b\n    )\n    , poss = case_when(\n      dosis == 1 ~ 2\n      , dosis == 3 ~ 1\n      , T ~ 1.5\n    )\n  ) \np <- vacc |> \n  ggplot() +\n  geom_text(\n    aes(\n      x = total,\n      y = poss,\n      color = color,\n      label = emoji(\"busts_in_silhouette\")\n    ),\n    family = \"EmojiOne\",\n    size = 30\n  ) +\n  scale_color_identity() +\n  ylim(0.2, 2) +\n  xlim(-2, 18) +\n  labs(\n    title = \"Perú - Vacunas\"\n    , caption = \"Data: MINSA - Peru | Viz: @JhonKevinFlore1\\n#30DayChartChallenge | Day2: Pictogram\"\n    , subtitle = \"Estado situacional\"\n    ) +\n  theme_void() +\n  theme(\n    text = element_text(\n      family = \"Ubuntu\",\n      face = 'bold',\n      colour = \"#004D40\"\n    ),\n    plot.background = element_rect(fill = \"#132A3F\", color = NA),\n    plot.title = element_text(\n      hjust = 0.5,\n      size = 60,\n      margin = margin(10, 0, 0, 0),\n      color = \"grey70\"\n    ),\n    plot.subtitle = element_text(\n      hjust = 0.5,\n      size = 36,\n      margin = margin(10, 0, 0, 0),\n      color = \"#c00000\"\n    ),\n    plot.caption = element_text(\n      hjust = 1,\n      margin = margin(20, 0, 2, 0),\n      color = \"grey50\"\n      , lineheight = .5\n      , size = 20\n    ),\n    plot.margin = margin(1, 1, 1, 1, unit = \"cm\")\n  )\n\n\nggdraw() +\n  draw_plot(p) +\n  draw_label(\"1º dosis\", x = .1, y = .58, size = 40, color = \"#df4576\") +\n  draw_label(\"2º dosis\", x = .1, y = .44, size = 40, color = \"#238ad3\") +\n  draw_label(\"3º dosis\", x = .1, y = .3, size = 40, color = \"#27eBa7\")\n\n# ggsave(\n  # , width = 16, height = 11, units = \"cm\") \n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nknitr::include_graphics('plots/day2_dcc_22.png')\n```\n\n::: {.cell-output-display}\n![](plots/day2_dcc_22.png){width=944}\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}