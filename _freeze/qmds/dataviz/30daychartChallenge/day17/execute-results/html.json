{
  "hash": "defae478f79068ba0008c2853d795089",
  "result": {
    "markdown": "---\ntitle: \"Day 17\" \ndate: '2022-04-17'\nimage: plots/day17_dcc_22.png\ncategories:\n  - R\n  - Data Viz \n  - ggplot2\n  - Data analysis\ndescription: 'Day 17 from #30dataChartChallenge'\n---\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrarian::shelf(\n  tidyverse\n  , PeruData\n  , sf\n)\n\ncuencas <- read_rds(here::here(\"data\", \"cuencas.rds\")) |> \n  janitor::clean_names()\n\n\n# unique(cuencas$nomb_uh_n2)\nrh <- unique(cuencas$nomb_uh_n1) |>   str_sub(25, -1) \nrh <- paste(\"R.H. del\\n\", rh)\nnames(rh) <- c(\n  \"#659dce\"\n  , \"#0e9e04\"\n  , \"#cc5612\"\n  )\ncl <- \"grey90\"\n\n\ncuencas$nomb_uh_n1 <- factor(cuencas$nomb_uh_n1, unique(cuencas$nomb_uh_n1))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nknitr::include_graphics('plots/day17_dcc_22.png')\n```\n\n::: {.cell-output-display}\n![](plots/day17_dcc_22.png){width=1200}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\np <- \n  ggplot() +\n  geom_sf(data = map_peru_peru, fill = NA, color = cl, size = .3, alpha = .1) +\n  geom_sf(data = cuencas, aes(color = nomb_uh_n1, size = area_km2), alpha = .2, fill = NA) +\n  scale_size(range = c(0, 1.8)) +\n  labs(\n    title = \"Perú - Regiones Hidrográficas\"\n    , caption = \"#30DayChartChallenge | Day17: Connections\\nData: ANA - Peru | Viz: @JhonKevinFlore1\"\n  ) +\n  scale_color_manual(values = names(rh)) +\n  annotate(\"text\", x = -80, y = -13, label = rh[1], color = names(rh)[1], size = 7) +\n  annotate(\"text\", x = -71, y = -7.5, label = rh[2], color = names(rh)[2], size = 7) +\n  annotate(\"text\", x = -67, y = -17, label = rh[3], color = names(rh)[3], size = 7) +\n  xlim(-82, -65) +\n  theme_void() +\n  theme(\n    legend.position = \"none\"\n    , plot.title = element_text(hjust = .5, size = 24, color = cl)\n    , plot.caption = element_text(hjust = .5, size = 12, color = \"grey60\")\n    # , plot.background = element_blank()\n    # , plot.margin = margin(1,10, 1, 1, \"in\")\n    # , panel.border = margin(1, 1, 1, 1, \"in\")\n  ) \n\nggsave(\n  here::here(\"plots\", \"day17_temp.png\")\n  , plot = p\n  , height = 9\n  , width = 8\n  , scale = 1\n  , bg = \"#242c34\"\n  # , unit = \"px\"\n  # , units = \"cm\"\n)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\namz <- cuencas |> filter(str_detect(nomb_uh_n2, \"Amazonas\"))\namz_sub <-\n  amz |>\n  sf::st_drop_geometry() |>\n  count(nomb_uh_n3, sort = T) |>\n  add_column(color = c_color)\n\namz_cuencas <-\n  ggplot() +\n  geom_sf(data =  map_peru_peru, color = \"white\", fill = NA, size = .2) +\n  geom_sf(data = amz, aes(size = area_km2, group = nomb_uh_n3, color = nomb_uh_n3), fill = NA) +\n  scale_size(range = c(0, 1.3)) +\n  scale_color_manual(values = pull(amz_sub, color)) +\n  theme_void()\n\namz_cuencas1 <- amz_cuencas +\n  theme(legend.position = \"none\")\n\nlab_c <- pull(amz_sub, nomb_uh_n3)\nlab_c[3] <- \"U.H. 497\"\n\nggdraw(xlim = c(0, 1), ylim = c(0, 1))  +\n  draw_plot(amz_cuencas1, x = -.2) +\n  theme(\n    plot.background = element_rect(fill = \"#242c34\")\n  ) +\n  draw_label(label = lab_c[3], x = 0.55, y = 0.85, color = c_color[4], fontfamily = font1,hjust = 0, fontface = \"bold\", size = 55) +\n  draw_label(label = lab_c[1], x = 0.55, y = 0.79, color = c_color[1], fontfamily = font1,hjust = 0, fontface = \"bold\", size = 55) +    # draw_label(label = lab_c[1], x = 0.55, y = 0.85, color = c_color[1], fontfamily = font1,hjust = 0, fontface = \"bold\", size = 55) +\n  draw_label(label = lab_c[2], x = 0.55, y = 0.73, color = c_color[3], fontfamily = font1,hjust = 0, fontface = \"bold\", size = 55) +\n  draw_label(label = lab_c[4], x = 0.55, y = 0.6169, color = c_color[2], fontfamily = font1,hjust = 0, fontface = \"bold\", size = 55) +\n  draw_label(label = lab_c[5], x = 0.55, y = 0.67, color = c_color[5], fontfamily = font1,hjust = 0, fontface = \"bold\", size = 55) +\n  draw_label(\n    label = \"Cuencas hidrograficas del Perú (UH Amazonas)\\n#30DayMapChallenge | Day 2: Lines\\nData: ANA | Created by @JhonKevinFlore1\"\n    , lineheight = .3\n    , color = \"white\"\n    , x = .92\n    , y = .08\n    , hjust = 1\n    , fontfamily = font1\n  )\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggsave('plots/day17_dcc_22.png', units = \"cm\", width = 9.6, height = 8.73)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nknitr::include_graphics('plots/day17_dcc_22.png')\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}