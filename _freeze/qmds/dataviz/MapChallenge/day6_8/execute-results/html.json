{
  "hash": "90fad01845540b4a822bc716e04fab2f",
  "result": {
    "markdown": "---\ntitle: \"Day 06 - 08\" \ndate: '2022-02-17'\nimage: \"plots/day6-8.gif\"\ncategories:\n  - R\n  - Data Viz \n  - sf\n  - ggplot2\ndescription: 'Day 6 - 8 from #30 Day Map Challenge'\n---\n\n\n\n\n\n\n## Code\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrarian::shelf(\n    tidyverse\n    , tidytuesdayR\n    , sf\n    , maps\n    , sysfonts\n)\n\nfont_add_google(\"Quicksand\")\nfont_add_google(\"Fira Sans\")\n\nshowtext::showtext_auto()\n\nf1 <- \"Quicksand\"\nf2 <- \"Fira Sans\"\n\ndata <- tt_load(\"2022-02-22\")\n\nfreedom <-\n    data$freedom |>\n    janitor::clean_names()# |>\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nfreedom |>\n    count(region_name) #americas\n\nfreedom_lt <-\n    freedom |>\n    filter(\n        region_name == \"Americas\"\n        , !(str_detect(country, \"America|Canada\"))\n        ) |>\n    mutate(\n        country =\n            case_when(\n                str_detect(country, \"Bolivia\") ~ \"Bolivia\"\n                , str_detect(country, \"Venez\") ~ \"Venezuela\"\n                , T ~ country\n            )\n        , status =\n            ifelse(status == \"F\", \"Libre\", ifelse(status == \"NF\", \"No Libre\", \"Parcialmente Libre\")) |>\n            factor(c(\"Libre\", \"Parcialmente Libre\", \"No Libre\"))\n    )\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nworld <-\n    map_data(\"world\") |>\n    as_tibble() |>\n    rename(country = region)\nlatam <-\n    right_join(world, freedom_lt) #|>\n\nanios <- unique(latam$year)\n\nlibre <- c(\"#006f3c\", \"#264b96\", \"#bf212f\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nanimation::saveGIF(\n    {\n        purrr::walk(anios, function(y, latam){\n            cli::cli_process_start(\"Compute {.val {y}}\")\n            p <- latam |>\n                dplyr::filter(year == y) |>\n                ggplot() +\n                aes(long, lat, group = paste(country, group), fill = status) +\n                geom_polygon(color = \"gray80\", size = .25) +\n                coord_fixed() +\n                scale_fill_manual(values = libre) +\n                labs(\n                    title = glue::glue(\"{y} - Libertad en Latinomerica\")\n                    , subtitle = \"Función de las libertades civiles y derechos políticos\"\n                    , caption = \"\\n#30DayMapChallenge | Día 5, 6 y 7: Red, Green, Blue\\nCreado por @JhonKevinFlore1\\nData: Freedom House a travéz de Arthur Cheiv\\n#TidyTuesday 2022/08\\n\"\n                    , fill = \"\"\n                ) +\n                guides(\n                    fill = guide_legend(\n                        direction = \"horizontal\"\n                        , title.position = \"top\"\n                        , title.hjust = .5\n                        , label.hjust = .5\n                        , label.position = \"bottom\"\n                        , keywidth = 2\n                        , keyheight = .4\n\n                    )\n                ) +\n                theme_void() +\n                # hrbrthemes::theme_ft_rc(grid = FALSE, axis_text_size = 0) +\n                theme(\n                    legend.position = c(.3, .35)\n                    , legend.text = element_text(size = 20, family = f2)\n                    , plot.title = element_text(hjus = .5, family = f2, size = 40, face = \"bold\")\n                    , plot.subtitle = element_text(size = 30, hjust = .5, family = f2)\n                    , plot.caption = element_text(size = 15, lineheight = .3, hjust = 1, vjust = .5, family = f1)\n                    , plot.caption.position = 'panel'\n                )\n            plot(p)\n            cli::cli_process_done()\n        }, latam = latam)\n    },\n    movie.name = here::here(\"plots\", \"day6-8.gif\")\n    , interval = 1\n    , ani.width = 1385\n    , ani.height = 1500\n    , ani.res = 300\n)\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}